// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../style/index';
@import '../icon/index';

@mixin iui-dropdown {
  @include iui-reset;
  @include iui-font-family;
  box-shadow: $iui-elevation-2;
  @include themed {
    background-color: t(iui-color-background-1);
  }
}

@mixin iui-list-menu {
  list-style-type: none;
  user-select: none;
  width: 100%;
  margin: 0;
  padding: 0;

  > li:not(.iui-divider) {
    display: flex;
    align-items: center;
    font-size: $iui-font-size;
    padding: $iui-component-padding-vertical $iui-sm;
    min-height: $iui-component-height;
    cursor: pointer;
    box-sizing: border-box;
    @include themed {
      color: t(iui-text-color);
    }

    > .iui-icon {
      @include iui-menu-icon;
    }

    > .iui-content {
      flex: 1 1 auto;

      .iui-menu-description {
        font-size: $iui-font-size-small;
        @include themed {
          opacity: t(iui-opacity-3);
        }
      }

      + .iui-icon {
        margin-right: 0;
        margin-left: $iui-s;
      }

      &,
      > * {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }

    &:hover:not(.iui-disabled):not(.iui-active) {
      @include themed {
        background-color: rgba(
          t(iui-color-foreground-primary-rgb),
          t(iui-opacity-6)
        );
      }
    }

    &:focus {
      @include themed {
        outline: 1px solid t(iui-color-foreground-primary);
        outline-offset: -1px;
      }
    }
  
    &:focus:not(:focus-visible) {
      outline: none;
    }
  
    &:focus-visible {
      @include themed {
        outline: 1px solid t(iui-color-foreground-primary);
        outline-offset: -1px;
      }
    }

    &.iui-active {
      @include themed {
        background-color: rgba(
          t(iui-color-foreground-primary-rgb),
          t(iui-opacity-5)
        );
        border: solid 1px t(iui-color-foreground-primary);
      }

      > .iui-icon {
        @include themed {
          fill: t(iui-icons-color-primary);
        }
      }

      &:focus,
      &:focus-visible {
        outline-offset: -2px;
      }
    }

    &.iui-disabled {
      cursor: not-allowed;
      @include themed {
        color: t(iui-text-color-placeholder);
      }
  
      > .iui-icon {
        @include themed {
          fill: t(iui-icons-color-actionable-disabled);
        }
      }
    }
  }

  > .iui-divider {
    height: 1px;
    width: calc(100% - #{$iui-l});
    margin: auto;
    @include themed {
      background-color: t(iui-color-background-4);
    }
  }
}

@mixin iui-menu-icon {
  width: $iui-icons-default;
  height: $iui-icons-default;
  margin-right: $iui-s;
  flex: 0 0 auto;
  @include themed {
    fill: t(iui-icons-color-actionable);
  }
}
